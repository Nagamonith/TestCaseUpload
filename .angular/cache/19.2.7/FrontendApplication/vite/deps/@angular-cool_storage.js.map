{
  "version": 3,
  "sources": ["../../../../../../node_modules/@angular-cool/storage/fesm2020/angular-cool-storage.mjs"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { PLATFORM_ID, Injectable, Inject, NgModule } from '@angular/core';\nimport { isPlatformBrowser } from '@angular/common';\nimport { Subject } from 'rxjs';\nclass CoolStorageBase {\n  constructor(storageObject, storageObjectName) {\n    if (!storageObject) {\n      throw new Error(`Current browser does not support ${storageObjectName}`);\n    }\n    this._storageObject = storageObject;\n    this._itemSetSubject = new Subject();\n    this._itemRemovedSubject = new Subject();\n  }\n  get itemSetObservable() {\n    return this._itemSetSubject.asObservable();\n  }\n  get itemRemovedObservable() {\n    return this._itemRemovedSubject.asObservable();\n  }\n  getItem(key) {\n    return this._storageObject.getItem(key) || null;\n  }\n  setItem(key, value) {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n    this._setItemInStorage(key, value);\n  }\n  removeItem(key) {\n    let currentValue = this.tryGetObject(key);\n    if (!currentValue) {\n      currentValue = this.getItem(key);\n    }\n    this._itemRemovedSubject.next({\n      key,\n      value: currentValue\n    });\n    this._storageObject.removeItem(key);\n  }\n  key(index) {\n    return this._storageObject.key(index) || null;\n  }\n  clear() {\n    this._storageObject.clear();\n  }\n  get length() {\n    return this._storageObject.length;\n  }\n  getObject(key) {\n    const jsonInStorage = this.getItem(key);\n    if (jsonInStorage === null) {\n      return null;\n    }\n    return JSON.parse(jsonInStorage);\n  }\n  tryGetObject(key) {\n    try {\n      return this.getObject(key);\n    } catch (e) {\n      return null;\n    }\n  }\n  setObject(key, value) {\n    this._itemSetSubject.next({\n      key,\n      value\n    });\n    this._setItemInStorage(key, JSON.stringify(value));\n  }\n  _setItemInStorage(key, value) {\n    this._storageObject.setItem(key, value);\n  }\n}\nclass CoolServerStorage {\n  constructor() {\n    this._storageObject = {};\n  }\n  getItem(key) {\n    return this._storageObject[key] || null;\n  }\n  setItem(key, value) {\n    this._storageObject[key] = value;\n  }\n  removeItem(key) {\n    this._storageObject[key] = undefined;\n  }\n  key(index) {\n    return this._storageObject.key(index) || null;\n  }\n  clear() {\n    this._storageObject = {};\n  }\n  get length() {\n    return Object.keys(this._storageObject).length;\n  }\n}\nclass CoolLocalStorage extends CoolStorageBase {\n  constructor(platformId) {\n    if (isPlatformBrowser(platformId)) {\n      super(window.localStorage, 'LocalStorage');\n    } else {\n      super(new CoolServerStorage(), 'LocalStorage');\n    }\n  }\n}\nCoolLocalStorage.ɵfac = function CoolLocalStorage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || CoolLocalStorage)(i0.ɵɵinject(PLATFORM_ID));\n};\nCoolLocalStorage.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: CoolLocalStorage,\n  factory: CoolLocalStorage.ɵfac\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CoolLocalStorage, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\nclass CoolSessionStorage extends CoolStorageBase {\n  constructor(platformId) {\n    if (isPlatformBrowser(platformId)) {\n      super(window.sessionStorage, 'SessionStorage');\n    } else {\n      super(new CoolServerStorage(), 'SessionStorage');\n    }\n  }\n}\nCoolSessionStorage.ɵfac = function CoolSessionStorage_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || CoolSessionStorage)(i0.ɵɵinject(PLATFORM_ID));\n};\nCoolSessionStorage.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: CoolSessionStorage,\n  factory: CoolSessionStorage.ɵfac\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CoolSessionStorage, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [PLATFORM_ID]\n      }]\n    }];\n  }, null);\n})();\nclass CoolStorageModule {\n  static forRoot() {\n    return {\n      ngModule: CoolStorageModule,\n      providers: [CoolLocalStorage, CoolSessionStorage]\n    };\n  }\n}\nCoolStorageModule.ɵfac = function CoolStorageModule_Factory(__ngFactoryType__) {\n  return new (__ngFactoryType__ || CoolStorageModule)();\n};\nCoolStorageModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: CoolStorageModule\n});\nCoolStorageModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(CoolStorageModule, [{\n    type: NgModule,\n    args: [{}]\n  }], null, null);\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { CoolLocalStorage, CoolSessionStorage, CoolStorageModule };\n"],
  "mappings": "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",
  "names": []
}
